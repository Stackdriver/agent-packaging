#!/bin/bash
  
declare -A arr

arr=( ["sles-12"]=suse-cloud ["sles-15"]=suse-cloud ["sles-12-sp1-sap"]=suse-sap-cloud ["sles-12-sp2-sap"]=suse-sap-cloud ["sles-12-sp3-sap"]=suse-sap-cloud ["sles-12-sp4-sap"]=suse-sap-cloud ["sles-15-sap"]=suse-sap-cloud ["sles-15-sp1-sap"]=suse-sap-cloud )
apps=(jvm mysql apache nginx redis memcached)
for key in ${!arr[@]}; do
  echo ${key} ${arr[${key}]}
  for app in ${apps[@]}; do
    echo ${app}
    gcloud compute instances create ${key}-${app}-test-yo --project stackdriver-test-143416 --machine-type n1-standard-4  --image-family $key --image-project ${arr[${key}]} --metadata-from-file startup-script=sles/${app} --zone us-central1-a
    #gcloud compute instances get-serial-port-output ${key}-${app}-test-yo
  done
done
