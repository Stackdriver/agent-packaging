#!/bin/bash

declare -A arr

arr=( ["ubuntu-1804-lts"]=ubuntu-os-cloud ["ubuntu-1604-lts"]=ubuntu-os-cloud ["debian-10"]=debian-cloud ["debian-9"]=debian-cloud )
apps=(jvm mysql apache nginx redis memcached)
for key in ${!arr[@]}; do
  echo ${key} ${arr[${key}]}
  for app in ${apps[@]}; do
    echo ${app}
    gcloud compute instances create ${key}-${app}-test-yo --project stackdriver-test-143416 --machine-type n1-standard-4  --image-family $key --image-project ${arr[${key}]} --metadata-from-file startup-script=debian10/${app} --zone us-central1-a
    #gcloud compute instances get-serial-port-output ${key}-${app}-test-yo
  done
done
