#!/bin/bash

declare -A arr

arr=( ["centos-6"]=centos-cloud ["centos-7"]=centos-cloud ["centos-8"]=centos-cloud ["rhel-6"]=rhel-cloud ["rhel-7"]=rhel-cloud ["rhel-8"]=rhel-cloud)
apps=(jvm mysql apache nginx redis memcached)
for key in ${!arr[@]}; do
  echo ${key} ${arr[${key}]}
  for app in ${apps[@]}; do
    echo ${app}
    gcloud compute instances create ${key}-${app}-test-yo --project stackdriver-test-143416 --machine-type n1-standard-4  --image-family $key --image-project ${arr[${key}]} --metadata-from-file startup-script=centos8/${app} --zone us-central1-a
    #gcloud compute instances get-serial-port-output ${key}-${app}-test-yo
  done
done
